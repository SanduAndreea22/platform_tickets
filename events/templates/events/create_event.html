{% extends 'base.html' %}
{% block content %}

<section style="max-width:900px; margin:0 auto; padding:38px 16px;">
  <div style="background:#ffffff; border:1px solid #e5e7eb; border-radius:18px; padding:18px 18px 8px; box-shadow:0 10px 30px rgba(0,0,0,0.06);">
    <h1 style="margin:8px 0 6px; font-size:28px; font-weight:800; color:#2563eb; text-align:center;">
      üé§ Create a New Event
    </h1>
    <p style="margin:0 0 18px; text-align:center; color:#6b7280; font-size:14px;">
      Fill in the details below. You can add multiple ticket types (e.g., Standard, VIP).
    </p>

    <form method="post" enctype="multipart/form-data" style="display:flex; flex-direction:column; gap:16px; padding:6px 4px 16px;">
      {% csrf_token %}

      <div>
        <label style="display:block; margin:0 0 8px; color:#374151; font-weight:700;">Event title</label>
        <input
          type="text"
          name="title"
          required
          placeholder="e.g., Live Jazz Night"
          style="width:100%; box-sizing:border-box; border:1px solid #d1d5db; border-radius:14px; padding:11px 12px; background:#ffffff; outline:none;"
          onfocus="this.style.borderColor='#2563eb'; this.style.boxShadow='0 0 0 4px rgba(37,99,235,0.15)';"
          onblur="this.style.borderColor='#d1d5db'; this.style.boxShadow='none';"
        >
      </div>

      <div>
        <label style="display:block; margin:0 0 8px; color:#374151; font-weight:700;">Description</label>
        <textarea
          name="description"
          rows="5"
          required
          placeholder="Tell people what to expect, lineup, schedule, rules, etc."
          style="width:100%; box-sizing:border-box; border:1px solid #d1d5db; border-radius:14px; padding:11px 12px; background:#ffffff; outline:none; resize:vertical;"
          onfocus="this.style.borderColor='#2563eb'; this.style.boxShadow='0 0 0 4px rgba(37,99,235,0.15)';"
          onblur="this.style.borderColor='#d1d5db'; this.style.boxShadow='none';"
        ></textarea>
      </div>

      <div>
        <label style="display:block; margin:0 0 8px; color:#374151; font-weight:700;">Location</label>
        <input
          type="text"
          name="location"
          required
          placeholder="e.g., Bucharest, The Old Town Club"
          style="width:100%; box-sizing:border-box; border:1px solid #d1d5db; border-radius:14px; padding:11px 12px; background:#ffffff; outline:none;"
          onfocus="this.style.borderColor='#2563eb'; this.style.boxShadow='0 0 0 4px rgba(37,99,235,0.15)';"
          onblur="this.style.borderColor='#d1d5db'; this.style.boxShadow='none';"
        >
      </div>

      <div style="display:grid; grid-template-columns:1fr 1fr; gap:14px;">
        <div>
          <label style="display:block; margin:0 0 8px; color:#374151; font-weight:700;">Start date</label>
          <input
            type="datetime-local"
            name="start_date"
            required
            style="width:100%; box-sizing:border-box; border:1px solid #d1d5db; border-radius:14px; padding:11px 12px; background:#ffffff; outline:none;"
            onfocus="this.style.borderColor='#2563eb'; this.style.boxShadow='0 0 0 4px rgba(37,99,235,0.15)';"
            onblur="this.style.borderColor='#d1d5db'; this.style.boxShadow='none';"
          >
        </div>

        <div>
          <label style="display:block; margin:0 0 8px; color:#374151; font-weight:700;">End date</label>
          <input
            type="datetime-local"
            name="end_date"
            required
            style="width:100%; box-sizing:border-box; border:1px solid #d1d5db; border-radius:14px; padding:11px 12px; background:#ffffff; outline:none;"
            onfocus="this.style.borderColor='#2563eb'; this.style.boxShadow='0 0 0 4px rgba(37,99,235,0.15)';"
            onblur="this.style.borderColor='#d1d5db'; this.style.boxShadow='none';"
          >
        </div>
      </div>

      <div>
        <label style="display:block; margin:0 0 8px; color:#374151; font-weight:700;">Event image</label>
        <input type="file" name="image" accept="image/*" style="width:100%;">
        <div style="margin-top:8px; font-size:12px; color:#6b7280;">
          Tip: Use a wide image (recommended 1200√ó630).
        </div>
      </div>

      <hr style="border:none; border-top:1px solid #e5e7eb; margin:6px 0;">

      <div style="display:flex; align-items:flex-end; justify-content:space-between; gap:10px; flex-wrap:wrap;">
        <div>
          <h2 style="margin:0; font-size:18px; font-weight:800; color:#2563eb;">üéüÔ∏è Ticket types</h2>
          <p style="margin:6px 0 0; color:#6b7280; font-size:13px;">Add at least one ticket type.</p>
        </div>

        <button
          type="button"
          id="add-ticket"
          style="background:#f3f4f6; border:1px solid #e5e7eb; padding:10px 12px; border-radius:14px; font-size:13px; font-weight:700; cursor:pointer;"
          onmouseover="this.style.background='#e5e7eb';"
          onmouseout="this.style.background='#f3f4f6';"
        >
          + Add ticket type
        </button>
      </div>

      <div id="ticket-container" style="display:flex; flex-direction:column; gap:10px; margin-top:8px;">
        <div style="display:grid; grid-template-columns:1.2fr 0.8fr 0.8fr; gap:10px;">
          <input
            type="text"
            name="ticket_name"
            placeholder="Ticket name (e.g., Standard)"
            style="width:100%; box-sizing:border-box; border:1px solid #d1d5db; border-radius:14px; padding:11px 12px; background:#ffffff; outline:none;"
            onfocus="this.style.borderColor='#2563eb'; this.style.boxShadow='0 0 0 4px rgba(37,99,235,0.15)';"
            onblur="this.style.borderColor='#d1d5db'; this.style.boxShadow='none';"
          >
          <input
            type="number"
            name="ticket_price"
            placeholder="Price (EUR)"
            step="0.01"
            style="width:100%; box-sizing:border-box; border:1px solid #d1d5db; border-radius:14px; padding:11px 12px; background:#ffffff; outline:none;"
            onfocus="this.style.borderColor='#2563eb'; this.style.boxShadow='0 0 0 4px rgba(37,99,235,0.15)';"
            onblur="this.style.borderColor='#d1d5db'; this.style.boxShadow='none';"
          >
          <input
            type="number"
            name="ticket_quantity"
            placeholder="Quantity"
            style="width:100%; box-sizing:border-box; border:1px solid #d1d5db; border-radius:14px; padding:11px 12px; background:#ffffff; outline:none;"
            onfocus="this.style.borderColor='#2563eb'; this.style.boxShadow='0 0 0 4px rgba(37,99,235,0.15)';"
            onblur="this.style.borderColor='#d1d5db'; this.style.boxShadow='none';"
          >
        </div>
      </div>

      <div style="display:flex; justify-content:center; margin-top:10px;">
        <button
          type="submit"
          style="background:#2563eb; color:#ffffff; border:none; padding:12px 18px; border-radius:14px; font-weight:800; cursor:pointer; min-width:220px;"
          onmouseover="this.style.background='#1d4ed8';"
          onmouseout="this.style.background='#2563eb';"
        >
          Create event
        </button>
      </div>

      <p style="margin:8px 0 0; text-align:center; font-size:12px; color:#9ca3af;">
        By creating an event, you confirm the information is accurate.
      </p>
    </form>
  </div>
</section>

<script>
document.getElementById('add-ticket').addEventListener('click', function() {
  const container = document.getElementById('ticket-container');

  const newTicket = document.createElement('div');
  newTicket.style.display = 'grid';
  newTicket.style.gridTemplateColumns = '1.2fr 0.8fr 0.8fr';
  newTicket.style.gap = '10px';
  newTicket.style.marginTop = '6px';

  const baseInputStyle = "width:100%; box-sizing:border-box; border:1px solid #d1d5db; border-radius:14px; padding:11px 12px; background:#ffffff; outline:none;";
  const focus = "this.style.borderColor='#2563eb'; this.style.boxShadow='0 0 0 4px rgba(37,99,235,0.15)';";
  const blur  = "this.style.borderColor='#d1d5db'; this.style.boxShadow='none';";

  newTicket.innerHTML = `
    <input type="text" name="ticket_name" placeholder="Ticket name"
      style="${baseInputStyle}" onfocus="${focus}" onblur="${blur}">
    <input type="number" name="ticket_price" placeholder="Price (EUR)" step="0.01"
      style="${baseInputStyle}" onfocus="${focus}" onblur="${blur}">
    <input type="number" name="ticket_quantity" placeholder="Quantity"
      style="${baseInputStyle}" onfocus="${focus}" onblur="${blur}">
  `;
  container.appendChild(newTicket);
});
</script>

{% endblock %}

